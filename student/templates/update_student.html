{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Student - {{ student.first_name }} {{ student.last_name }}</title>
    <link rel="stylesheet" href="{% static 'css/update_student.css' %}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Update Student Information</h1>
            <div class="header-buttons">
                <a href="{% url 'student_detail' student.id %}" class="back-btn">‚Üê Back to Details</a>
                <a href="{% url 'read_students' %}" class="list-btn">üìã All Students</a>
            </div>
        </header>

        <main>
            <div class="form-container">
                <div class="current-photo">
                    {% if student.image %}
                        <img src="{{ student.image.url }}" alt="{{ student.first_name }}" class="preview-photo">
                    {% else %}
                        <div class="photo-placeholder">
                            {{ student.first_name|first }}{{ student.last_name|first }}
                        </div>
                    {% endif %}
                    <p class="student-name">{{ student.first_name }} {{ student.last_name }}</p>
                    <p class="student-id">ID: #{{ student.id }}</p>
                </div>

                <form method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    
                    <div class="form-section">
                        <h2>Personal Information</h2>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="first_name">First Name <span class="required">*</span></label>
                                <input type="text" id="first_name" name="first_name" value="{{ student.first_name }}" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="last_name">Last Name <span class="required">*</span></label>
                                <input type="text" id="last_name" name="last_name" value="{{ student.last_name }}" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="date_of_birth">Date of Birth <span class="required">*</span></label>
                                <input type="date" id="date_of_birth" name="date_of_birth" value="{{ student.date_of_birth|date:'Y-m-d' }}" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="gender">Gender <span class="required">*</span></label>
                                <select id="gender" name="gender" required>
                                    <option value="">Select Gender</option>
                                    <option value="Male" {% if student.gender == "Male" %}selected{% endif %}>Male</option>
                                    <option value="Female" {% if student.gender == "Female" %}selected{% endif %}>Female</option>
                                    <option value="Other" {% if student.gender == "Other" %}selected{% endif %}>Other</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="image">Update Student Photo</label>
                            <input type="file" id="image" name="image" accept="image/*">
                            <small>Leave empty to keep current photo</small>
                        </div>
                    </div>

                    <div class="form-section">
                        <h2>Academic Information</h2>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="grade">Grade <span class="required">*</span></label>
                                <input type="text" id="grade" name="grade" value="{{ student.grade }}" placeholder="e.g., 10th Grade" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="enrollment_date">Enrollment Date <span class="required">*</span></label>
                                <input type="date" id="enrollment_date" name="enrollment_date" value="{{ student.enrollment_date|date:'Y-m-d' }}" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h2>Parent/Guardian Information</h2>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="fathers_name">Father's Name</label>
                                <input type="text" id="fathers_name" name="fathers_name" value="{{ student.fathers_name|default:'' }}">
                            </div>
                            
                            <div class="form-group">
                                <label for="mother_name">Mother's Name</label>
                                <input type="text" id="mother_name" name="mother_name" value="{{ student.mother_name|default:'' }}">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h2>Contact Information</h2>
                        
                        <div class="form-group">
                            <label for="phone_number">Phone Number <span class="required">*</span></label>
                            <input type="tel" id="phone_number" name="phone_number" value="{{ student.phone_number }}" placeholder="+977-9800000000" required>
                        </div>

                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" value="{{ student.email|default:'' }}" placeholder="student@example.com">
                        </div>

                        <div class="form-group">
                            <label for="address">Address <span class="required">*</span></label>
                            <textarea id="address" name="address" rows="3" placeholder="Enter full address" required>{{ student.address }}</textarea>
                        </div>
                    </div>

                    {% if messages %}
                        <div class="messages">
                            {% for message in messages %}
                                <div class="alert alert-{{ message.tags }}">
                                    {{ message }}
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}

                    <div class="form-actions">
                        <button type="submit" class="btn btn-submit">Update Student</button>
                        <a href="{% url 'student_detail' student.id %}" class="btn btn-cancel">Cancel</a>
                    </div>
                </form>
            </div>
        </main>

        <footer>
            <p> Student Management System. All rights reserved.</p>
        </footer>
    </div>
</body>
</html>